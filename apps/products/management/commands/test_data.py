from django.core.management.base import BaseCommand
from django.contrib.auth import get_user_model
from apps.products.models import Category, Product, ProductImage
from apps.pages.models import Page
from apps.blog.models import Article, ArticleCategory
from decimal import Decimal
from django.utils import timezone

User = get_user_model()


class Command(BaseCommand):
    help = "Generate test data for products, categories, pages and blog articles"

    def add_arguments(self, parser):
        parser.add_argument(
            "--clear",
            action="store_true",
            help="Clear existing test data before creating new",
        )

    def handle(self, *args, **options):
        if options["clear"]:
            self.stdout.write("Clearing existing test data...")
            self.clear_test_data()

        self.stdout.write("Creating test data...")

        # Create categories first
        self.create_categories()

        # Create products
        self.create_products()

        # Create pages
        self.create_pages()

        # Create blog categories and articles
        self.create_blog_categories()
        self.create_blog_articles()

        self.stdout.write(self.style.SUCCESS("Successfully created test data!"))

    def clear_test_data(self):
        """Clear existing test data"""
        Product.objects.all().delete()
        Category.objects.all().delete()
        Page.objects.all().delete()
        Article.objects.all().delete()
        ArticleCategory.objects.all().delete()
        self.stdout.write("Test data cleared.")

    def create_categories(self):
        """Create category hierarchy"""
        self.stdout.write("Creating categories...")

        # Main categories
        seeds = Category.objects.create(
            name="Семена микрозелени",
            slug="microgreens-seeds",
            description="Широкий ассортимент семян для выращивания микрозелени в домашних условиях",
        )
        equipment = Category.objects.create(
            name="Оборудование для выращивания",
            slug="growing-equipment",
            description="Все необходимое оборудование для профессионального выращивания микрозелени",
        )
        preparations = Category.objects.create(
            name="Препараты и добавки",
            slug="preparations-additives",
            description="Биопрепараты и удобрения для здорового роста микрозелени",
        )
        accessories = Category.objects.create(
            name="Аксессуары",
            slug="accessories",
            description="Полезные аксессуары для удобного выращивания и ухода",
        )

        # Subcategories for seeds
        cabbage = Category.objects.create(
            name="Капустные",
            slug="cabbage",
            parent=seeds,
            description="Семена капустных культур: руккола, кресс-салат, горчица и другие",
        )
        spicy = Category.objects.create(
            name="Пряные",
            slug="spicy",
            parent=seeds,
            description="Пряные травы с ярким ароматом: базилик, кинза, укроп",
        )
        juice_sprouts = Category.objects.create(
            name="Проростки для сока",
            slug="sprouts-for-juice",
            parent=seeds,
            description="Семена для получения сочных ростков, идеальных для соков",
        )
        misc_seeds = Category.objects.create(
            name="Разное",
            slug="miscellaneous-seeds",
            parent=seeds,
            description="Различные семена для экспериментов и необычных вкусов",
        )

        # Subcategories for equipment
        trays = Category.objects.create(
            name="Поддоны и лотки",
            slug="pallets-trays",
            parent=equipment,
            description="Лотки и поддоны различных размеров для удобного выращивания",
        )
        substrates = Category.objects.create(
            name="Субстраты и маты",
            slug="substrates-mats",
            parent=equipment,
            description="Натуральные субстраты для здорового роста микрозелени",
        )
        phytolights = Category.objects.create(
            name="Фитолампы",
            slug="phytolights",
            parent=equipment,
            description="Специальные лампы для оптимального роста растений",
        )
        sprouters = Category.objects.create(
            name="Проращиватели",
            slug="sprouters",
            parent=equipment,
            description="Автоматические и ручные проращиватели для дома",
        )

        # Subcategories for preparations
        biopreparations = Category.objects.create(
            name="Биопрепараты",
            slug="biopreparations",
            parent=preparations,
            description="Экологичные препараты для защиты растений",
        )
        fertilizers = Category.objects.create(
            name="Удобрения",
            slug="fertilizers",
            parent=preparations,
            description="Органические удобрения для питания микрозелени",
        )

        # Subcategories for accessories
        tools = Category.objects.create(
            name="Инструменты",
            slug="tools",
            parent=accessories,
            description="Инструменты для ухода и сбора урожая",
        )
        containers = Category.objects.create(
            name="Контейнеры",
            slug="containers",
            parent=accessories,
            description="Контейнеры для хранения и транспортировки микрозелени",
        )

        self.stdout.write("Categories created successfully.")

    def create_products(self):
        """Create sample products"""
        self.stdout.write("Creating products...")

        # Get categories
        cabbage = Category.objects.get(slug="cabbage")
        spicy = Category.objects.get(slug="spicy")
        juice_sprouts = Category.objects.get(slug="sprouts-for-juice")
        sprouters = Category.objects.get(slug="sprouters")
        trays = Category.objects.get(slug="pallets-trays")
        tools = Category.objects.get(slug="tools")
        substrates = Category.objects.get(slug="substrates-mats")

        # Seed products data
        seed_products = [
            {
                "name": "Семена рукколы Итальянской",
                "slug": "arugula-italian-seeds",
                "article": "ARU001",
                "category": cabbage,
                "price": Decimal("180.00"),
                "old_price": Decimal("220.00"),
                "stock": 50,
                "short_description": "Семена рукколы с насыщенным острым вкусом, идеальны для салатов.",
                "full_description": """Руккола Итальянская - популярная микрозелень с острым, пряным вкусом, богатая витаминами A, C и K. Идеально подходит для салатов, сэндвичей и украшения блюд.

Характеристики:
- Всхожесть: 95%
- Производитель: Италия
- Упаковка: 50 г
- Срок годности: 2 года""",
                "germination_time": "3-5 дней",
                "difficulty_level": "easy",
                "taste_characteristics": "Острый, пряный, с легкой горчинкой",
                "benefits": "Богата витаминами A, C, K и кальцием. Укрепляет иммунитет.",
                "recommended_substrate": "Кокосовый мат или био-губка",
                "growing_instructions": """1. Равномерно распределите семена по поверхности субстрата
2. Увлажните из пульверизатора
3. Накройте крышкой на 2 дня для проращивания
4. После появления ростков откройте и выращивайте при свете
5. Собирайте урожай на 7-10 день""",
                "recommended_temperature": "18-22°C",
                "harvest_dates": "7-10 дней",
                "image": "products/arugula.jpg",
            },
            {
                "name": "Семена базилика Фиолетового",
                "slug": "basil-purple-seeds",
                "article": "BAS001",
                "category": spicy,
                "price": Decimal("220.00"),
                "stock": 30,
                "short_description": "Семена базилика с насыщенным ароматом и красивыми фиолетовыми листьями.",
                "full_description": """Микрозелень базилика Фиолетового обладает насыщенным ароматом и вкусом, содержит эфирные масла и антиоксиданты. Прекрасно дополняет итальянские блюда.

Характеристики:
- Всхожесть: 90%
- Производитель: Франция
- Упаковка: 30 г
- Срок годности: 3 года""",
                "germination_time": "5-7 дней",
                "difficulty_level": "medium",
                "taste_characteristics": "Яркий, пряный, с перечными нотками",
                "benefits": "Содержит эфирные масла, антиоксиданты, витамины K и A.",
                "recommended_substrate": "Био-губка",
                "growing_instructions": """1. Замочите семена на 4 часа перед посадкой
2. Равномерно распределите по субстрату
3. Увлажните и накройте на 3 дня
4. После прорастания обеспечьте хорошее освещение
5. Собирайте на 12-14 день""",
                "recommended_temperature": "20-24°C",
                "harvest_dates": "12-14 дней",
                "image": "products/basil.jpg",
            },
            {
                "name": "Семена кресс-салата Узколистного",
                "slug": "cress-narrow-seeds",
                "article": "CRE001",
                "category": cabbage,
                "price": Decimal("150.00"),
                "stock": 75,
                "short_description": "Быстрорастущие семена кресс-салата с нежным перечным вкусом.",
                "full_description": """Кресс-салат Узколистный - идеальный выбор для начинающих. Быстро прорастает, неприхотлив в уходе и обладает острым перечным вкусом.

Характеристики:
- Всхожесть: 98%
- Производитель: Россия
- Упаковка: 100 г
- Срок годности: 2 года""",
                "germination_time": "2-3 дня",
                "difficulty_level": "easy",
                "taste_characteristics": "Острый, перечный",
                "benefits": "Высокое содержание витамина C, железа и кальция.",
                "recommended_substrate": "Любой влажный субстрат",
                "growing_instructions": """1. Посейте семена густо на влажный субстрат
2. Слегка присыпьте землей
3. Накройте на 1-2 дня
4. Обеспечьте хорошее освещение
5. Собирайте через 5-7 дней""",
                "recommended_temperature": "16-20°C",
                "harvest_dates": "5-7 дней",
                "image": "products/cress.jpg",
            },
            {
                "name": "Семена подсолнечника для проращивания",
                "slug": "sunflower-sprouting-seeds",
                "article": "SUN001",
                "category": juice_sprouts,
                "price": Decimal("250.00"),
                "stock": 40,
                "short_description": "Крупные семена подсолнечника для получения сочных ростков.",
                "full_description": """Ростки подсолнечника обладают ореховым вкусом и содержат большое количество белка, витаминов E и B. Идеальны для соков и смузи.

Характеристики:
- Всхожесть: 92%
- Производитель: Украина
- Упаковка: 200 г
- Срок годности: 1 год""",
                "germination_time": "7-10 дней",
                "difficulty_level": "medium",
                "taste_characteristics": "Ореховый, сладковатый",
                "benefits": "Богаты белком, витамином E, магнием и цинком.",
                "recommended_substrate": "Кокосовое волокно",
                "growing_instructions": """1. Замочите семена на 8-12 часов
2. Промойте и распределите по субстрату
3. Накройте темной тканью на 3-4 дня
4. После прорастания выставьте на свет
5. Собирайте на 7-10 день""",
                "recommended_temperature": "18-22°C",
                "harvest_dates": "7-10 дней",
                "image": "products/sunflower.jpg",
            },
            {
                "name": "Семена редиса Красного Великана",
                "slug": "radish-red-giant-seeds",
                "article": "RAD001",
                "category": cabbage,
                "price": Decimal("190.00"),
                "stock": 35,
                "short_description": "Семена редиса с ярким острым вкусом и красивыми розовыми стеблями.",
                "full_description": """Микрозелень редиса Красный Великан обладает насыщенным острым вкусом и содержит большое количество витамина C. Отлично подходит для салатов и бутербродов.

Характеристики:
- Всхожесть: 96%
- Производитель: Голландия
- Упаковка: 50 г
- Срок годности: 2 года""",
                "germination_time": "4-6 дней",
                "difficulty_level": "easy",
                "taste_characteristics": "Яркий, острый, с горчичными нотками",
                "benefits": "Богат витамином C, калием и железом. Улучшает пищеварение.",
                "recommended_substrate": "Кокосовый мат",
                "growing_instructions": """1. Равномерно распределите семена по поверхности
2. Увлажните из пульверизатора
3. Накройте на 2-3 дня
4. После прорастания обеспечьте хорошее освещение
5. Собирайте на 8-10 день""",
                "recommended_temperature": "18-21°C",
                "harvest_dates": "8-10 дней",
                "image": "products/radish.jpg",
            },
        ]

        # Equipment products data
        equipment_products = [
            {
                "name": "Проращиватель автоматический Pro-Grow 500",
                "slug": "pro-grow-500-sprouter",
                "article": "PRO001",
                "category": sprouters,
                "price": Decimal("3500.00"),
                "old_price": Decimal("4200.00"),
                "stock": 15,
                "short_description": "Автоматический проращиватель с системой полива на 5 лотков.",
                "full_description": """Профессиональный проращиватель Pro-Grow 500 с автоматической системой полива и контролем влажности. Идеален для выращивания больших объемов микрозелени в домашних условиях.

Характеристики:
- Материал: Пищевой пластик
- Количество лотков: 5
- Объем воды: 1.5 л
- Таймер полива: 12/24 часа
- Габариты: 35×25×40 см
- Вес: 2.5 кг

Комплектация:
- Основной блок с насосом
- 5 лотков для выращивания
- 5 поддонов для сбора воды
- Инструкция на русском языке
- Гарантийный талон (12 месяцев)""",
                "image": "products/pro-grow.jpg",
            },
            {
                "name": "Лоток для проращивания 30×20 см с крышкой",
                "slug": "sprouting-tray-30x20-with-lid",
                "article": "TRA001",
                "category": trays,
                "price": Decimal("450.00"),
                "stock": 60,
                "short_description": "Пластиковый лоток с дренажными отверстиями и прозрачной крышкой.",
                "full_description": """Прочный пластиковый лоток размером 30×20 см с дренажными отверстиями и прозрачной крышкой. Подходит для выращивания различных видов микрозелени.

Характеристики:
- Материал: Полипропилен (PP)
- Размеры: 30×20×5 см
- Цвет: Белый
- Крышка: Прозрачная (в комплекте)

Преимущества:
- Удобные дренажные отверстия
- Прозрачная крышка создает парниковый эффект
- Легко моется и долговечен
- Подходит для многоразового использования""",
                "image": "products/tray-30x20.jpg",
            },
            {
                "name": "Ножницы для срезки микрозелени Premium",
                "slug": "microgreen-premium-scissors",
                "article": "SCI001",
                "category": tools,
                "price": Decimal("650.00"),
                "stock": 25,
                "short_description": "Профессиональные ножницы для аккуратной срезки микрозелени.",
                "full_description": """Острые ножницы из нержавеющей стали с тонкими лезвиями, специально разработанные для срезки нежной микрозелени. Эргономичные ручки обеспечивают комфорт при работе.

Характеристики:
- Материал: Нержавеющая сталь 420
- Длина: 18 см
- Вес: 120 г
- Ручки: Силиконовые, нескользящие
- Производство: Германия

Преимущества:
- Точный и аккуратный срез
- Не травмирует нежные ростки
- Легко моется
- Долго сохраняет остроту""",
                "image": "products/scissors.jpg",
            },
            {
                "name": "Кокосовый субстрат для микрозелени 5 кг",
                "slug": "coco-substrate-5kg",
                "article": "SUB001",
                "category": substrates,
                "price": Decimal("1200.00"),
                "stock": 40,
                "short_description": "Натуральный кокосовый субстрат высшего качества для выращивания микрозелени.",
                "full_description": """Натуральный кокосовый субстрат высшего качества, идеально подходящий для выращивания микрозелени. Не содержит химических добавок, обладает отличной воздухопроницаемостью.

Характеристики:
- Состав: 100% кокосовое волокно
- Вес: 5 кг (сухой)
- pH: 5.5-6.5
- Экологичность: Биоразлагаемый
- Страна происхождения: Шри-Ланка

Инструкция по применению:
1. Размешайте 1 часть субстрата с 3 частями воды
2. Дайте набухнуть 15-20 минут
3. Распределите по лотку слоем 2-3 см
4. Посейте семена и увлажните""",
                "image": "products/coco-substrate.jpg",
            },
        ]

        # Create seed products
        for product_data in seed_products:
            image_path = product_data.pop("image")
            product = Product.objects.create(**product_data)

            # Create product image
            ProductImage.objects.create(product=product, image=image_path, is_main=True)

        # Create equipment products
        for product_data in equipment_products:
            image_path = product_data.pop("image")
            product = Product.objects.create(**product_data)

            # Create product image
            ProductImage.objects.create(product=product, image=image_path, is_main=True)

        self.stdout.write("Products created successfully.")

    def create_pages(self):
        """Create static pages"""
        self.stdout.write("Creating pages...")

        pages_data = [
            {
                "title": "О нас",
                "slug": "o-nas",
                "content": """<p>Добро пожаловать в мир здорового питания и домашнего садоводства! Наш интернет-магазин специализируется на продаже высококачественных семян и профессионального оборудования для выращивания микрозелени в домашних условиях.</p>

<p>Мы начали свой путь в 2019 году как небольшая семейная компания, когда основатели магазина увлеклись идеей здорового образа жизни и поняли, насколько важно иметь доступ к свежей, богатой витаминами зелени круглый год. После многочисленных экспериментов с различными сортами семян и методами проращивания, мы решили поделиться своими знаниями и опытом с единомышленниками.</p>

<p>Сегодня мы предлагаем широкий ассортимент семян для микрозелени: от классических кресс-салата и рукколы до экзотических сортов редиса и горчицы. Все семена проходят строгий контроль качества и поставляются от проверенных производителей. Помимо семян, мы предлагаем полный спектр оборудования: проращиватели различных размеров, специальные контейнеры, коврики для проращивания, LED-светильники и системы автоматического полива.</p>

<p>Наша миссия – сделать выращивание микрозелени простым, доступным и увлекательным процессом для каждого. Мы не просто продаем товары, но и предоставляем подробные инструкции, советы по уходу и рецепты использования микрозелени в кулинарии. Наша команда состоит из энтузиастов здорового питания, готовых помочь вам на каждом этапе – от выбора первых семян до создания собственной мини-фермы на подоконнике.</p>

<p>Присоединяйтесь к нашему сообществу любителей микрозелени и откройте для себя удивительный мир свежих витаминов, выращенных собственными руками!</p>""",
                "is_active": True,
                "meta_description": "История и миссия нашего магазина семян для микрозелени. Качественные семена и оборудование для домашнего выращивания.",
            },
            {
                "title": "Гарантии качества",
                "slug": "garantii-kachestva",
                "content": """<p>Мы понимаем, насколько важно для вас получить качественные семена и надежное оборудование для выращивания микрозелени. Поэтому предоставляем комплексные гарантии на всю нашу продукцию.</p>

<h2>Гарантия на семена:</h2>
<ul>
<li>Всхожесть семян не менее 85% в течение указанного срока годности</li>
<li>При несоответствии показателей всхожести — полная замена партии или возврат средств</li>
<li>Экологическая чистота: все семена проходят контроль на отсутствие химических обработок</li>
</ul>

<h2>Гарантия на оборудование:</h2>
<ul>
<li>Проращиватели и лотки — 12 месяцев с момента покупки</li>
<li>Системы полива и освещения — 24 месяца</li>
<li>Бесплатный ремонт или замена при заводском браке</li>
<li>Техническая поддержка по настройке и эксплуатации</li>
</ul>

<h2>Гарантия результата:</h2>
<p>Если при соблюдении всех рекомендаций по выращиванию вы не получили ожидаемый урожай микрозелени, мы компенсируем стоимость семян и проконсультируем по улучшению технологии.</p>

<h2>Условия возврата:</h2>
<ul>
<li>14 дней на возврат товара без объяснения причин</li>
<li>Семена принимаются к возврату в невскрытой упаковке</li>
<li>Оборудование — в оригинальной упаковке с сохранением товарного вида</li>
</ul>

<p><strong>Ваш успех в выращивании микрозелени — наша главная цель!</strong></p>""",
                "is_active": True,
                "meta_description": "Гарантии качества на семена и оборудование для микрозелени. Условия возврата и замены товаров.",
            },
            {
                "title": "Доставка и оплата",
                "slug": "dostavka-i-oplata",
                "content": """<h2>Способы доставки</h2>

<h3>По Москве и Московской области:</h3>
<ul>
<li><strong>Курьерская доставка</strong> — 300 руб. (бесплатно при заказе от 2000 руб.)</li>
<li><strong>Самовывоз</strong> — бесплатно (м. Сокольники, ул. Стромынка, 18)</li>
<li><strong>Доставка в день заказа</strong> — 500 руб. (при заказе до 12:00)</li>
</ul>

<h3>По России:</h3>
<ul>
<li><strong>Почта России</strong> — от 200 руб. (сроки доставки 5-14 дней)</li>
<li><strong>СДЭК</strong> — от 250 руб. (сроки доставки 2-7 дней)</li>
<li><strong>Boxberry</strong> — от 180 руб. (сроки доставки 3-8 дней)</li>
</ul>

<h2>Способы оплаты</h2>
<ul>
<li><strong>Банковские карты</strong> — Visa, MasterCard, МИР</li>
<li><strong>Электронные кошельки</strong> — Яндекс.Деньги, WebMoney, QIWI</li>
<li><strong>Наличными курьеру</strong> — только по Москве и МО</li>
<li><strong>Наложенный платеж</strong> — через Почту России (+3% к сумме заказа)</li>
<li><strong>Банковский перевод</strong> — для юридических лиц</li>
</ul>

<h2>Условия доставки семян</h2>
<p>Семена упаковываются в специальные конверты с контролем влажности и температуры. Все посылки застрахованы на полную стоимость товара.</p>

<p><strong>Бесплатная доставка по всей России при заказе от 3000 рублей!</strong></p>""",
                "is_active": True,
                "meta_description": "Условия доставки семян и оборудования по России. Способы оплаты заказов в интернет-магазине.",
            },
            {
                "title": "Контакты",
                "slug": "kontakty",
                "content": """<h2>Наши координаты</h2>

<p><strong>Адрес офиса и склада:</strong><br>
Москва, ул. Стромынка, 18, офис 205<br>
м. Сокольники (7 минут пешком)</p>

<p><strong>Телефон:</strong><br>
+7 (495) 123-45-67<br>
Ежедневно с 9:00 до 21:00</p>

<p><strong>Email:</strong><br>
info@microgreens-store.ru<br>
Отвечаем в течение 2 часов в рабочее время</p>

<p><strong>Социальные сети:</strong></p>
<ul>
<li>Instagram: @microgreens_store</li>
<li>ВКонтакте: vk.com/microgreens_store</li>
<li>Telegram: @microgreens_help</li>
</ul>

<h2>Время работы</h2>

<p><strong>Офис:</strong><br>
Понедельник - Пятница: 9:00 - 18:00<br>
Суббота: 10:00 - 16:00<br>
Воскресенье: выходной</p>

<p><strong>Самовывоз:</strong><br>
Ежедневно с 10:00 до 20:00<br>
(предварительно согласовать время по телефону)</p>

<h2>Как нас найти</h2>

<p>Ближайшая станция метро — Сокольники (Сокольническая линия).<br>
Выход №2, далее 7 минут пешком по ул. Стромынка в сторону центра.<br>
Здание с вывеской "Бизнес-центр Стромынка", 2 этаж, офис 205.</p>

<p>Парковка для автомобилей во дворе здания — бесплатно.</p>""",
                "is_active": True,
                "meta_description": "Контактная информация магазина семян микрозелени: адрес, телефон, email, время работы, как добраться.",
            },
            {
                "title": "Возврат товара",
                "slug": "vozvrat-tovara",
                "content": """<h2>Общие условия возврата</h2>

<p>Согласно закону "О защите прав потребителей", вы имеете право вернуть товар в течение <strong>14 дней</strong> с момента получения, если товар не подошел по каким-либо причинам.</p>

<h2>Условия возврата семян</h2>

<ul>
<li>Семена принимаются к возврату только в <strong>оригинальной невскрытой упаковке</strong></li>
<li>Упаковка должна сохранять товарный вид</li>
<li>Срок годности семян не должен быть нарушен</li>
<li>Обязательно наличие чека или документа, подтверждающего покупку</li>
</ul>

<h2>Условия возврата оборудования</h2>

<ul>
<li>Товар должен быть в оригинальной упаковке</li>
<li>Сохранены все комплектующие и документация</li>
<li>Отсутствуют следы использования</li>
<li>Не нарушена целостность упаковки и товара</li>
</ul>

<h2>Процедура возврата</h2>

<ol>
<li><strong>Свяжитесь с нами</strong> по телефону +7 (495) 123-45-67 или email info@microgreens-store.ru</li>
<li><strong>Опишите причину возврата</strong> и предоставьте номер заказа</li>
<li><strong>Получите инструкции</strong> по отправке товара обратно</li>
<li><strong>Отправьте товар</strong> удобным для вас способом</li>
<li><strong>Получите возврат средств</strong> в течение 10 рабочих дней после получения товара</li>
</ol>

<h2>Расходы на возврат</h2>

<ul>
<li>Стоимость обратной доставки оплачивает покупатель</li>
<li>При браке товара — доставка за наш счет</li>
<li>Возврат средств производится тем же способом, которым была произведена оплата</li>
</ul>

<h2>Исключения</h2>

<p>Не подлежат возврату:</p>
<ul>
<li>Товары, изготовленные по индивидуальному заказу</li>
<li>Семена с нарушенной упаковкой</li>
<li>Товары с истекшим сроком годности</li>
</ul>

<p><strong>Мы заботимся о ваших интересах и всегда готовы найти компромиссное решение!</strong></p>""",
                "is_active": True,
                "meta_description": "Условия возврата семян и оборудования для микрозелени. Пошаговая инструкция по возврату товара.",
            },
            {
                "title": "FAQ",
                "slug": "faq",
                "content": """<h2>Общие вопросы</h2>

<h3>Что такое микрозелень?</h3>
<p>Микрозелень — это молодые съедобные растения, которые собирают через 7-14 дней после прорастания. Они содержат в несколько раз больше витаминов и минералов, чем взрослые растения.</p>

<h3>Сложно ли выращивать микрозелень дома?</h3>
<p>Совсем нет! Микрозелень — идеальный выбор для начинающих садоводов. Большинство сортов неприхотливы и быстро растут даже на подоконнике.</p>

<h3>Какое оборудование нужно для начала?</h3>
<p>Минимальный набор: лоток с дренажными отверстиями, субстрат (кокосовое волокно или специальные маты), семена и пульверизатор для полива.</p>

<h2>Вопросы о семенах</h2>

<h3>Какие семена лучше выбрать новичку?</h3>
<p>Рекомендуем начать с кресс-салата, рукколы или редиса. Эти сорта быстро прорастают и неприхотливы в уходе.</p>

<h3>Как долго хранятся семена?</h3>
<p>При правильном хранении (в сухом прохладном месте) семена сохраняют всхожесть 2-3 года. Каждая упаковка содержит информацию о сроке годности.</p>

<h3>Можно ли использовать обычные семена из продуктового магазина?</h3>
<p>Не рекомендуем. Семена для микрозелени проходят специальную обработку и контроль качества. Обычные семена могут быть обработаны химикатами.</p>

<h2>Вопросы о выращивании</h2>

<h3>Сколько времени нужно для выращивания?</h3>
<p>В зависимости от сорта: от 5 дней (кресс-салат) до 14 дней (подсолнечник). Точные сроки указаны на каждой упаковке семян.</p>

<h3>Нужно ли дополнительное освещение?</h3>
<p>Зимой и в северных регионах рекомендуем использовать фитолампы. Летом достаточно света от окна (избегайте прямых солнечных лучей).</p>

<h3>Как часто поливать микрозелень?</h3>
<p>2-3 раза в день из пульверизатора. Субстрат должен быть влажным, но не мокрым. Избегайте застоя воды.</p>

<h3>Почему семена не прорастают?</h3>
<p>Основные причины: старые семена, неправильная температура, слишком сухой или слишком влажный субстрат, недостаток воздуха.</p>

<h2>Вопросы о заказах</h2>

<h3>Как быстро приходят заказы?</h3>
<p>По Москве — 1-2 дня, по России — 3-7 дней в зависимости от службы доставки.</p>

<h3>Можно ли заказать семена поштучно?</h3>
<p>Да, минимальный заказ — 1 упаковка семян. Для оптовых покупателей предусмотрены скидки.</p>

<h3>Есть ли гарантия на всхожесть?</h3>
<p>Да, мы гарантируем всхожесть не менее 85%. При несоответствии — полная замена или возврат средств.</p>

<p><strong>Не нашли ответ на свой вопрос? Свяжитесь с нами по телефону +7 (495) 123-45-67!</strong></p>""",
                "is_active": True,
                "meta_description": "Ответы на часто задаваемые вопросы о микрозелени, семенах и выращивании. Полезная информация для начинающих.",
            },
        ]

        for page_data in pages_data:
            Page.objects.create(**page_data)

        self.stdout.write("Pages created successfully.")

    def create_blog_categories(self):
        """Create blog categories"""
        self.stdout.write("Creating blog categories...")

        categories = [
            {
                "name": "Выращивание микрозелени",
                "slug": "microgreens-growing",
                "description": "Статьи о методах и технологиях выращивания микрозелени в домашних условиях",
            },
            {
                "name": "Польза микрозелени",
                "slug": "microgreens-benefits",
                "description": "Информация о полезных свойствах различных видов микрозелени",
            },
            {
                "name": "Рецепты с микрозеленью",
                "slug": "microgreens-recipes",
                "description": "Кулинарные рецепты с использованием микрозелени",
            },
            {
                "name": "Оборудование",
                "slug": "equipment",
                "description": "Обзоры оборудования для выращивания микрозелени",
            },
        ]

        for category_data in categories:
            ArticleCategory.objects.create(**category_data)

        self.stdout.write("Blog categories created successfully.")

    def create_blog_articles(self):
        """Create blog articles"""
        self.stdout.write("Creating blog articles...")

        growing_category = ArticleCategory.objects.get(slug="microgreens-growing")
        benefits_category = ArticleCategory.objects.get(slug="microgreens-benefits")
        recipes_category = ArticleCategory.objects.get(slug="microgreens-recipes")
        equipment_category = ArticleCategory.objects.get(slug="equipment")

        admin_user = User.objects.get(username="admin")

        articles_data = [
            {
                "title": "Проращивание семян подсолнечника: от зернышка до витаминной зелени",
                "slug": "sunflower-sprouting-guide",
                "author": admin_user,
                "category": growing_category,
                "content": """<h2>Семена подсолнечника — один из самых популярных выборов для начинающих любителей микрозелени</h2>

<p>Эти крупные семена легко прорастают и дают нежные ростки с ярко выраженным ореховым вкусом, который прекрасно дополняет салаты, бутерброды и смузи.</p>

<h3>Подготовка к проращиванию</h3>

<p>Перед посевом семена подсолнечника рекомендуется замочить на 8-12 часов в прохладной воде. Это размягчит твердую оболочку и ускорит прорастание. Используйте только очищенные семена без черной шелухи — она может загнивать и портить вкус будущих ростков.</p>

<h3>Процесс выращивания</h3>

<p>Проращивание происходит в лотках с дренажными отверстиями на влажной подложке из джута или кокосового волокна. Семена равномерно распределяются по поверхности и слегка вдавливаются. Первые 2-3 дня лоток держат в темноте, поддерживая постоянную влажность опрыскиванием 2-3 раза в день.</p>

<h3>Сбор урожая</h3>

<p>Микрозелень подсолнечника готова к употреблению через 7-10 дней, когда ростки достигают 3-5 см в высоту и появляются первые семядольные листочки. В этот момент концентрация витаминов E, B и магния достигает максимума.</p>

<p>Срезанные ростки хранятся в холодильнике до 5 дней и содержат в 50 раз больше питательных веществ, чем взрослое растение.</p>""",
                "short_description": "Подробное руководство по выращиванию микрозелени из семян подсолнечника в домашних условиях",
                "is_published": True,
                "published_at": timezone.now(),
                "image": "articles/sunflower-sprouts.jpg",
            },
            {
                "title": "5 ошибок новичков при выращивании микрозелени",
                "slug": "microgreens-beginner-mistakes",
                "author": admin_user,
                "category": growing_category,
                "content": """<h2>Начинающие садоводы часто сталкиваются с неудачами при первых попытках вырастить микрозелень</h2>

<p>Рассмотрим самые распространенные ошибки и способы их избежать.</p>

<h3>1. Неправильный полив</h3>

<p><strong>Ошибка:</strong> Слишком обильный полив или использование холодной воды из-под крана.</p>

<p><strong>Решение:</strong> Используйте теплую отстоянную воду, поливайте из пульверизатора 2-3 раза в день. Субстрат должен быть влажным, но не мокрым.</p>

<h3>2. Плохая вентиляция</h3>

<p><strong>Ошибка:</strong> Семена и ростки "задыхаются" под плотно закрытой крышкой.</p>

<p><strong>Решение:</strong> После появления первых ростков обеспечьте доступ свежего воздуха. Приоткрывайте крышку или используйте контейнеры с вентиляционными отверстиями.</p>

<h3>3. Неправильное освещение</h3>

<p><strong>Ошибка:</strong> Размещение рассады на прямом солнце или в полной темноте.</p>

<p><strong>Решение:</strong> Микрозелень любит рассеянный свет. Идеальное место — подоконник северного или восточного окна. При необходимости используйте фитолампы.</p>

<h3>4. Слишком густой посев</h3>

<p><strong>Ошибка:</strong> Желание получить больший урожай приводит к загущению посевов.</p>

<p><strong>Решение:</strong> Семена должны лежать в один слой, слегка соприкасаясь друг с другом. Загущенные посевы плохо проветриваются и могут загнить.</p>

<h3>5. Несвоевременный сбор урожая</h3>

<p><strong>Ошибка:</strong> Ростки срезают слишком рано или поздно.</p>

<p><strong>Решение:</strong> Оптимальное время сбора — когда появились семядольные листочки, но еще не начали формироваться настоящие листья. Обычно это 7-14 дней в зависимости от вида.</p>

<p>Избегая этих ошибок, вы гарантированно получите здоровую, вкусную микрозелень уже с первого раза!</p>""",
                "short_description": "Распространенные ошибки при выращивании микрозелени и способы их избежать",
                "is_published": True,
                "published_at": timezone.now() - timezone.timedelta(days=1),
                "image": "articles/microgreens-mistakes.jpg",
            },
            {
                "title": "Топ-5 самых полезных видов микрозелени для здоровья",
                "slug": "top-5-healthy-microgreens",
                "author": admin_user,
                "category": benefits_category,
                "content": """<h2>Микрозелень — это настоящий суперфуд, содержащий в несколько раз больше витаминов, чем взрослые растения</h2>

<p>Рассмотрим самые полезные виды микрозелени, которые стоит включить в свой рацион.</p>

<h3>1. Брокколи</h3>

<p>Микрозелень брокколи содержит в 50 раз больше сульфорафана, чем взрослое растение. Это мощный антиоксидант, обладающий противораковыми свойствами.</p>

<h3>2. Подсолнечник</h3>

<p>Ростки подсолнечника богаты витамином E, белком и незаменимыми жирными кислотами. Отлично поддерживают сердечно-сосудистую систему.</p>

<h3>3. Горох</h3>

<p>Микрозелень гороха содержит большое количество растительного белка, витаминов A, C и K. Обладает приятным сладковатым вкусом.</p>

<h3>4. Руккола</h3>

<p>Богата витаминами K и C, кальцием и железом. Обладает детокс-эффектом и улучшает пищеварение.</p>

<h3>5. Кресс-салат</h3>

<p>Один из рекордсменов по содержанию витамина C. Укрепляет иммунитет и обладает противовоспалительными свойствами.</p>

<p><strong>Совет:</strong> Для максимальной пользы употребляйте микрозелень в свежем виде, добавляя в салаты, смузи или используя как украшение блюд.</p>""",
                "short_description": "Какие виды микрозелени наиболее полезны для здоровья и почему",
                "is_published": True,
                "published_at": timezone.now() - timezone.timedelta(days=3),
                "image": "articles/healthy-microgreens.jpg",
            },
            {
                "title": "Как выбрать проращиватель для дома: гид по покупке",
                "slug": "how-to-choose-sprouter",
                "author": admin_user,
                "category": equipment_category,
                "content": """<h2>Правильный выбор проращивателя значительно упростит процесс выращивания микрозелени</h2>

<p>Разберемся, на что обратить внимание при покупке.</p>

<h3>Типы проращивателей</h3>

<ul>
<li><strong>Лотки с крышкой</strong> — простейший вариант для начинающих</li>
<li><strong>Многоярусные системы</strong> — позволяют выращивать несколько видов одновременно</li>
<li><strong>Автоматические проращиватели</strong> — с системой полива и вентиляции</li>
</ul>

<h3>Критерии выбора</h3>

<ol>
<li><strong>Материал:</strong> Пищевой пластик, стекло или керамика</li>
<li><strong>Размер:</strong> Зависит от количества микрозелени, которое вы планируете выращивать</li>
<li><strong>Система полива:</strong> Ручной или автоматический</li>
<li><strong>Вентиляция:</strong> Наличие отверстий для циркуляции воздуха</li>
<li><strong>Легкость ухода:</strong> Возможность легкой очистки</li>
</ol>

<h3>Рекомендации</h3>

<p>Для начинающих подойдут простые лотки с крышкой. Если вы планируете выращивать микрозелень регулярно, стоит рассмотреть автоматические системы. Для небольших объемов отлично работают керамические проращиватели.</p>

<p><strong>Важно:</strong> Обратите внимание на наличие гарантии и отзывы других покупателей.</p>""",
                "short_description": "На что обратить внимание при выборе проращивателя для микрозелени",
                "is_published": True,
                "published_at": timezone.now() - timezone.timedelta(days=5),
                "image": "articles/sprouters.jpg",
            },
            {
                "title": "3 простых рецепта с микрозеленью для завтрака",
                "slug": "3-easy-microgreens-breakfast-recipes",
                "author": admin_user,
                "category": recipes_category,
                "content": """<h2>Начните свой день с полезных и вкусных блюд с микрозеленью</h2>

<p>Предлагаем три простых рецепта, которые разнообразят ваше утро.</p>

<h3>1. Тост с авокадо и микрозеленью</h3>

<p><strong>Ингредиенты:</strong></p>
<ul>
<li>Хлеб цельнозерновой — 2 ломтика</li>
<li>Авокадо — 1 шт.</li>
<li>Микрозелень (руккола, подсолнечник) — горсть</li>
<li>Лимонный сок, соль, перец — по вкусу</li>
</ul>

<p><strong>Приготовление:</strong></p>
<ol>
<li>Поджарьте хлеб в тостере</li>
<li>Разомните авокадо вилкой, добавьте лимонный сок, соль и перец</li>
<li>Намажьте пасту из авокадо на тосты</li>
<li>Сверху выложите микрозелень</li>
</ol>

<h3>2. Омлет с микрозеленью</h3>

<p><strong>Ингредиенты:</strong></p>
<ul>
<li>Яйца — 2 шт.</li>
<li>Молоко — 2 ст.л.</li>
<li>Микрозелень (брокколи, горох) — горсть</li>
<li>Соль, специи — по вкусу</li>
</ul>

<p><strong>Приготовление:</strong></p>
<ol>
<li>Взбейте яйца с молоком, солью и специями</li>
<li>Вылейте на разогретую сковороду</li>
<li>Когда омлет почти готов, посыпьте микрозеленью</li>
<li>Сверните пополам и подавайте</li>
</ol>

<h3>3. Смузи с микрозеленью</h3>

<p><strong>Ингредиенты:</strong></p>
<ul>
<li>Бананы — 1 шт.</li>
<li>Яблоко — 1 шт.</li>
<li>Шпинат — горсть</li>
<li>Микрозелень (подсолнечник, кресс-салат) — горсть</li>
<li>Вода или миндальное молоко — 200 мл</li>
</ul>

<p><strong>Приготовление:</strong></p>
<ol>
<li>Очистите банан и яблоко</li>
<li>Сложите все ингредиенты в блендер</li>
<li>Взбейте до однородной массы</li>
<li>Подавайте сразу после приготовления</li>
</ol>

<p><strong>Совет:</strong> Экспериментируйте с разными видами микрозелени для новых вкусовых сочетаний!</p>""",
                "short_description": "Простые и полезные рецепты завтраков с добавлением микрозелени",
                "is_published": True,
                "published_at": timezone.now() - timezone.timedelta(days=7),
                "image": "articles/microgreens-breakfast.jpg",
            },
        ]

        for article_data in articles_data:
            image_path = article_data.pop("image")
            article = Article.objects.create(**article_data)
            article.image = image_path
            article.save()

        self.stdout.write("Articles created successfully.")
